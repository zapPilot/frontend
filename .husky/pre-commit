#!/bin/sh
set -euo pipefail

# Pre-commit quality gates
# - lint-staged: Format & lint changed files quickly
# - lint: Full repo lint to enforce sonarjs complexity thresholds
# - type-check: TypeScript compilation
# - deadcode:check: Unused code detection
# - dup:all: Duplicate code detection (jscpd + jsinspect)
# - test:safeall: Full test suite

npx lint-staged
npm run lint
npm run type-check
npm run deadcode:check
npm run dup:all
npm run test:safeall
